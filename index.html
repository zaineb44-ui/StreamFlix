<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StreamFlix - TMDB Streaming</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #032541;
            --secondary: #01b4e4;
            --dark: #0f0f0f;
            --light: #ffffff;
            --gray: #2d2d2d;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--dark);
            color: var(--light);
        }

        header {
            background: linear-gradient(to right, var(--primary), var(--secondary));
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
        }

        .logo {
            font-size: 2rem;
            font-weight: bold;
            color: var(--light);
            text-decoration: none;
            display: flex;
            align-items: center;
        }

        .logo i {
            margin-right: 10px;
            color: var(--secondary);
        }

        .search-container {
            display: flex;
            width: 50%;
        }

        .search-input {
            width: 100%;
            padding: 0.8rem 1rem;
            border: none;
            border-radius: 30px 0 0 30px;
            font-size: 1rem;
            outline: none;
        }

        .search-button {
            padding: 0 1.5rem;
            background-color: var(--secondary);
            color: var(--light);
            border: none;
            border-radius: 0 30px 30px 0;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s;
        }

        .search-button:hover {
            background-color: #0099cc;
        }

        .nav-tabs {
            display: flex;
            margin-top: 1rem;
            border-bottom: 1px solid var(--gray);
        }

        .tab-button {
            padding: 0.8rem 1.5rem;
            background: none;
            border: none;
            color: var(--light);
            cursor: pointer;
            font-size: 1rem;
            position: relative;
            transition: all 0.3s;
        }

        .tab-button.active {
            color: var(--secondary);
        }

        .tab-button.active::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 0;
            width: 100%;
            height: 3px;
            background-color: var(--secondary);
        }

        .tab-button:hover:not(.active) {
            color: #aaaaaa;
        }

        .main-content {
            padding: 2rem;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .media-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-top: 1.5rem;
        }

        .media-card {
            background-color: var(--gray);
            border-radius: 8px;
            overflow: hidden;
            transition: transform 0.3s, box-shadow 0.3s;
            cursor: pointer;
            position: relative;
        }

        .media-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
        }

        .media-poster {
            width: 100%;
            height: 300px;
            object-fit: cover;
        }

        .media-info {
            padding: 1rem;
        }

        .media-title {
            font-size: 1rem;
            margin-bottom: 0.5rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .media-meta {
            display: flex;
            justify-content: space-between;
            color: #aaaaaa;
            font-size: 0.9rem;
        }

        .media-rating {
            color: gold;
        }

        .player-container {
            width: 100%;
            max-width: 1000px;
            margin: 2rem auto;
            display: none;
        }

        .player-iframe {
            width: 100%;
            height: 500px;
            border: none;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
        }

        .player-back {
            margin-bottom: 1rem;
            padding: 0.5rem 1rem;
            background-color: var(--secondary);
            color: var(--light);
            border: none;
            border-radius: 4px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .player-back:hover {
            background-color: #0099cc;
        }

        .season-selector, .episode-selector {
            margin: 1rem 0;
            display: none;
        }

        .selector-title {
            margin-bottom: 0.5rem;
            color: var(--secondary);
        }

        .selector-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .season-btn, .episode-btn {
            padding: 0.5rem 1rem;
            background-color: var(--gray);
            color: var(--light);
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .season-btn:hover, .episode-btn:hover {
            background-color: #3d3d3d;
        }

        .season-btn.active, .episode-btn.active {
            background-color: var(--secondary);
            color: var(--dark);
            font-weight: bold;
        }

        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 200px;
            font-size: 1.5rem;
            color: var(--secondary);
        }

        .loading i {
            animation: spin 1s linear infinite;
            margin-right: 10px;
        }

        .history-card {
            position: relative;
        }

        .progress-bar {
            height: 4px;
            background-color: var(--gray);
            border-radius: 2px;
            margin-top: 8px;
            overflow: hidden;
        }

        .progress-bar div {
            height: 100%;
            background-color: var(--secondary);
        }

        .media-time {
            font-size: 0.8rem;
            color: #888;
        }

        .no-results {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 200px;
            font-size: 1.2rem;
            color: #aaa;
            gap: 10px;
            grid-column: 1/-1;
        }

        .error {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 200px;
            font-size: 1.2rem;
            color: #ff6b6b;
            gap: 10px;
            grid-column: 1/-1;
        }

        .history-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .clear-history {
            background-color: #ff6b6b;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .clear-history:hover {
            background-color: #ff5252;
        }

        .delete-item {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            opacity: 0;
            transition: opacity 0.3s;
            z-index: 10;
        }

        .history-card:hover .delete-item {
            opacity: 1;
        }

        .delete-item:hover {
            background-color: #ff6b6b;
        }

        .add-to-watchlist {
            position: absolute;
            top: 10px;
            left: 10px;
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            opacity: 0;
            transition: opacity 0.3s;
            z-index: 10;
        }

        .media-card:hover .add-to-watchlist {
            opacity: 1;
        }

        .add-to-watchlist:hover {
            background-color: var(--secondary);
        }

        .in-watchlist {
            background-color: var(--secondary);
            opacity: 1 !important;
        }

        .search-results {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-top: 2rem;
        }

        .search-section {
            margin-bottom: 2rem;
        }

        .search-section h3 {
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid var(--gray);
        }

        /* Auth Modal Styles */
        .auth-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .auth-container {
            background-color: var(--dark);
            padding: 2rem;
            border-radius: 8px;
            width: 100%;
            max-width: 400px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
        }

        .auth-tabs {
            display: flex;
            margin-bottom: 1.5rem;
            border-bottom: 1px solid var(--gray);
        }

        .auth-tab {
            padding: 0.8rem 1.5rem;
            background: none;
            border: none;
            color: var(--light);
            cursor: pointer;
            font-size: 1rem;
            position: relative;
        }

        .auth-tab.active {
            color: var(--secondary);
        }

        .auth-tab.active::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 0;
            width: 100%;
            height: 3px;
            background-color: var(--secondary);
        }

        .auth-form {
            display: none;
        }

        .auth-form.active {
            display: block;
        }

        .form-group {
            margin-bottom: 1rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--light);
        }

        .form-group input {
            width: 100%;
            padding: 0.8rem;
            background-color: var(--gray);
            border: none;
            border-radius: 4px;
            color: var(--light);
        }

        .auth-button {
            width: 100%;
            padding: 0.8rem;
            background-color: var(--secondary);
            color: var(--light);
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1rem;
            margin-top: 1rem;
            transition: all 0.3s;
        }

        .auth-button:hover {
            background-color: #0099cc;
        }

        .auth-error {
            color: #ff6b6b;
            margin-top: 1rem;
            text-align: center;
        }

        .auth-success {
            color: #4caf50;
            margin-top: 1rem;
            text-align: center;
        }

        .close-modal {
            position: absolute;
            top: 10px;
            right: 10px;
            background: none;
            border: none;
            color: var(--light);
            font-size: 1.5rem;
            cursor: pointer;
        }

        .user-actions {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .auth-button-small {
            padding: 0.5rem 1rem;
            background-color: var(--secondary);
            color: var(--light);
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .auth-button-small:hover {
            background-color: #0099cc;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--light);
        }

        .user-avatar {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background-color: var(--secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @media (max-width: 768px) {
            .media-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }
            
            .media-poster {
                height: 225px;
            }
            
            header {
                flex-direction: column;
                padding: 1rem;
            }
            
            .search-container {
                width: 100%;
                margin-top: 1rem;
            }
            
            .player-iframe {
                height: 300px;
            }

            .history-actions {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
            }

            .search-results {
                grid-template-columns: 1fr;
            }

            .user-actions {
                margin-top: 1rem;
                width: 100%;
                justify-content: flex-end;
            }
        }
    </style>
</head>
<body>
    <!-- Auth Modals -->
    <div class="auth-modal" id="auth-modal">
        <div class="auth-container">
            <button class="close-modal" id="close-modal">&times;</button>
            <div class="auth-tabs">
                <button class="auth-tab active" data-tab="login">Login</button>
                <button class="auth-tab" data-tab="register">Register</button>
            </div>
            
            <div class="auth-form active" id="login-form">
                <div class="form-group">
                    <label for="login-email">Email</label>
                    <input type="email" id="login-email" placeholder="Enter your email">
                </div>
                <div class="form-group">
                    <label for="login-password">Password</label>
                    <input type="password" id="login-password" placeholder="Enter your password">
                </div>
                <button class="auth-button" id="login-button">Login</button>
                <div class="auth-error" id="login-error"></div>
                <div class="auth-success" id="login-success"></div>
            </div>
            
            <div class="auth-form" id="register-form">
                <div class="form-group">
                    <label for="register-name">Name</label>
                    <input type="text" id="register-name" placeholder="Enter your name">
                </div>
                <div class="form-group">
                    <label for="register-email">Email</label>
                    <input type="email" id="register-email" placeholder="Enter your email">
                </div>
                <div class="form-group">
                    <label for="register-password">Password</label>
                    <input type="password" id="register-password" placeholder="Enter your password">
                </div>
                <div class="form-group">
                    <label for="register-confirm">Confirm Password</label>
                    <input type="password" id="register-confirm" placeholder="Confirm your password">
                </div>
                <button class="auth-button" id="register-button">Register</button>
                <div class="auth-error" id="register-error"></div>
                <div class="auth-success" id="register-success"></div>
            </div>
        </div>
    </div>

    <header>
        <a href="#" class="logo">
            <i class="fas fa-film"></i>
            <span>StreamFlix</span>
        </a>
        <div class="search-container">
            <input type="text" class="search-input" placeholder="Search for movies or TV shows...">
            <button class="search-button">
                <i class="fas fa-search"></i>
            </button>
        </div>
        <div class="user-actions" id="user-actions">
            <button class="auth-button-small" id="open-auth">Login / Register</button>
        </div>
    </header>

    <div class="nav-tabs">
        <button class="tab-button active" data-tab="movies">Movies</button>
        <button class="tab-button" data-tab="tv">TV Shows</button>
        <button class="tab-button" data-tab="history">
            <i class="fas fa-history"></i> History
        </button>
        <button class="tab-button" data-tab="watchlist">
            <i class="fas fa-bookmark"></i> Watchlist
        </button>
    </div>

    <div class="main-content">
        <div class="tab-content active" id="movies">
            <h2>Popular Movies</h2>
            <div class="media-grid" id="movies-grid"></div>
        </div>

        <div class="tab-content" id="tv">
            <h2>Popular TV Shows</h2>
            <div class="media-grid" id="tv-grid"></div>
        </div>

        <div class="tab-content" id="history">
            <div class="history-actions">
                <h2>Watch History</h2>
                <button class="clear-history" id="clear-history">Clear All History</button>
            </div>
            <div class="media-grid" id="history-grid"></div>
        </div>

        <div class="tab-content" id="watchlist">
            <h2>My Watchlist</h2>
            <div class="media-grid" id="watchlist-grid"></div>
        </div>

        <div class="tab-content" id="search-results" style="display: none;">
            <h2>Search Results</h2>
            <div class="search-results">
                <div class="search-section">
                    <h3>Movies</h3>
                    <div class="media-grid" id="search-movies"></div>
                </div>
                <div class="search-section">
                    <h3>TV Shows</h3>
                    <div class="media-grid" id="search-tv"></div>
                </div>
            </div>
        </div>

        <div class="player-container" id="player-container">
            <button class="player-back" id="back-button">
                <i class="fas fa-arrow-left"></i>
                Back to browsing
            </button>
            <div class="season-selector" id="season-selector">
                <h3 class="selector-title">Seasons</h3>
                <div class="selector-buttons" id="season-buttons"></div>
            </div>
            <div class="episode-selector" id="episode-selector">
                <h3 class="selector-title">Episodes</h3>
                <div class="selector-buttons" id="episode-buttons"></div>
            </div>
            <iframe class="player-iframe" id="player-iframe" allowfullscreen></iframe>
        </div>
    </div>

    <script>
        // TMDB API Configuration
        const API_KEY = 'f5c8d5add995935daa212039d7b34e5d';
        const API_URL = 'https://api.themoviedb.org/3';
        const IMAGE_URL = 'https://image.tmdb.org/t/p/w500';
        const VIDFAST_URL = 'https://vidfast.pro';
        const BACKEND_URL = 'https://streamflixmaroc.free.nf'; // Change this to your backend URL

        // DOM Elements
        const moviesGrid = document.getElementById('movies-grid');
        const tvGrid = document.getElementById('tv-grid');
        const historyGrid = document.getElementById('history-grid');
        const watchlistGrid = document.getElementById('watchlist-grid');
        const searchMoviesGrid = document.getElementById('search-movies');
        const searchTvGrid = document.getElementById('search-tv');
        const playerContainer = document.getElementById('player-container');
        const playerIframe = document.getElementById('player-iframe');
        const backButton = document.getElementById('back-button');
        const searchInput = document.querySelector('.search-input');
        const searchButton = document.querySelector('.search-button');
        const tabButtons = document.querySelectorAll('.tab-button');
        const tabContents = document.querySelectorAll('.tab-content');
        const seasonSelector = document.getElementById('season-selector');
        const seasonButtons = document.getElementById('season-buttons');
        const episodeSelector = document.getElementById('episode-selector');
        const episodeButtons = document.getElementById('episode-buttons');
        const clearHistoryBtn = document.getElementById('clear-history');
        const searchResultsTab = document.getElementById('search-results');
        
        // Auth elements
        const authModal = document.getElementById('auth-modal');
        const closeModal = document.getElementById('close-modal');
        const openAuth = document.getElementById('open-auth');
        const authTabs = document.querySelectorAll('.auth-tab');
        const authForms = document.querySelectorAll('.auth-form');
        const loginForm = document.getElementById('login-form');
        const registerForm = document.getElementById('register-form');
        const loginEmail = document.getElementById('login-email');
        const loginPassword = document.getElementById('login-password');
        const loginButton = document.getElementById('login-button');
        const loginError = document.getElementById('login-error');
        const loginSuccess = document.getElementById('login-success');
        const registerName = document.getElementById('register-name');
        const registerEmail = document.getElementById('register-email');
        const registerPassword = document.getElementById('register-password');
        const registerConfirm = document.getElementById('register-confirm');
        const registerButton = document.getElementById('register-button');
        const registerError = document.getElementById('register-error');
        const registerSuccess = document.getElementById('register-success');
        const userActions = document.getElementById('user-actions');

        // Current state
        let currentMediaType = 'movie';
        let currentTvShowId = null;
        let currentSeason = 1;
        let currentEpisodes = [];
        let mediaCache = {};
        let watchlist = [];
        let currentActiveTab = 'movies';
        let currentUser = JSON.parse(localStorage.getItem('currentUser')) || null;

        // Initialize the app
        document.addEventListener('DOMContentLoaded', () => {
            fetchPopularMovies();
            fetchPopularTVShows();
            setupEventListeners();
            updateAuthUI();
            
            if (currentUser) {
                loadUserData();
            }
        });

        // Set up event listeners
        function setupEventListeners() {
            // Tab switching
            tabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    tabButtons.forEach(btn => btn.classList.remove('active'));
                    tabContents.forEach(content => content.classList.remove('active'));
                    
                    button.classList.add('active');
                    const tabId = button.dataset.tab;
                    document.getElementById(tabId).classList.add('active');
                    currentActiveTab = tabId;
                    
                    if (tabId === 'history') {
                        displayWatchHistory();
                    } else if (tabId === 'watchlist') {
                        displayWatchlist();
                    } else if (tabId === 'movies') {
                        currentMediaType = 'movie';
                    } else if (tabId === 'tv') {
                        currentMediaType = 'tv';
                    }
                });
            });

            // Search functionality
            searchButton.addEventListener('click', performSearch);
            searchInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') performSearch();
            });

            // Back button
            backButton.addEventListener('click', () => {
                playerContainer.style.display = 'none';
                document.getElementById(currentActiveTab).style.display = 'block';
                document.getElementById(currentActiveTab).classList.add('active');
            });

            // Clear all history button
            clearHistoryBtn.addEventListener('click', clearAllHistory);
            
            // Auth modal
            openAuth.addEventListener('click', () => {
                authModal.style.display = 'flex';
            });
            
            closeModal.addEventListener('click', () => {
                authModal.style.display = 'none';
            });
            
            // Auth tabs
            authTabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    authTabs.forEach(t => t.classList.remove('active'));
                    authForms.forEach(f => f.classList.remove('active'));
                    
                    tab.classList.add('active');
                    document.getElementById(`${tab.dataset.tab}-form`).classList.add('active');
                });
            });
            
            // Login button
            loginButton.addEventListener('click', handleLogin);
            
            // Register button
            registerButton.addEventListener('click', handleRegister);
        }

        // Auth functions
        function handleLogin() {
            const email = loginEmail.value.trim();
            const password = loginPassword.value.trim();
            
            if (!email || !password) {
                loginError.textContent = 'Please fill in all fields';
                return;
            }
            
            loginError.textContent = '';
            loginButton.disabled = true;
            loginButton.textContent = 'Logging in...';
            
            fetch(`${BACKEND_URL}/api/auth/login`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ email, password })
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    loginSuccess.textContent = 'Login successful!';
                    currentUser = data.user;
                    localStorage.setItem('currentUser', JSON.stringify(currentUser));
                    localStorage.setItem('token', data.token);
                    
                    setTimeout(() => {
                        authModal.style.display = 'none';
                        updateAuthUI();
                        loadUserData();
                    }, 1000);
                } else {
                    loginError.textContent = data.message || 'Login failed';
                }
            })
            .catch(error => {
                console.error('Login error:', error);
                loginError.textContent = 'An error occurred during login';
            })
            .finally(() => {
                loginButton.disabled = false;
                loginButton.textContent = 'Login';
            });
        }
        
        function handleRegister() {
            const name = registerName.value.trim();
            const email = registerEmail.value.trim();
            const password = registerPassword.value.trim();
            const confirm = registerConfirm.value.trim();
            
            if (!name || !email || !password || !confirm) {
                registerError.textContent = 'Please fill in all fields';
                return;
            }
            
            if (password !== confirm) {
                registerError.textContent = 'Passwords do not match';
                return;
            }
            
            if (password.length < 6) {
                registerError.textContent = 'Password must be at least 6 characters';
                return;
            }
            
            registerError.textContent = '';
            registerButton.disabled = true;
            registerButton.textContent = 'Registering...';
            
            fetch(`${BACKEND_URL}/api/auth/register`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ name, email, password })
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    registerSuccess.textContent = 'Registration successful! Please login.';
                    registerName.value = '';
                    registerEmail.value = '';
                    registerPassword.value = '';
                    registerConfirm.value = '';
                    
                    // Switch to login tab
                    authTabs.forEach(t => t.classList.remove('active'));
                    authForms.forEach(f => f.classList.remove('active'));
                    document.querySelector('.auth-tab[data-tab="login"]').classList.add('active');
                    loginForm.classList.add('active');
                    loginEmail.value = email;
                } else {
                    registerError.textContent = data.message || 'Registration failed';
                }
            })
            .catch(error => {
                console.error('Registration error:', error);
                registerError.textContent = 'An error occurred during registration';
            })
            .finally(() => {
                registerButton.disabled = false;
                registerButton.textContent = 'Register';
            });
        }
        
        function logout() {
            currentUser = null;
            localStorage.removeItem('currentUser');
            localStorage.removeItem('token');
            localStorage.removeItem('watchlist');
            localStorage.removeItem('watchHistory');
            updateAuthUI();
            displayWatchlist();
            displayWatchHistory();
        }
        
        function updateAuthUI() {
            if (currentUser) {
                userActions.innerHTML = `
                    <div class="user-info">
                        <div class="user-avatar">${currentUser.name.charAt(0).toUpperCase()}</div>
                        <span>${currentUser.name}</span>
                    </div>
                    <button class="auth-button-small" id="logout-button">Logout</button>
                `;
                document.getElementById('logout-button').addEventListener('click', logout);
            } else {
                userActions.innerHTML = '<button class="auth-button-small" id="open-auth">Login / Register</button>';
                document.getElementById('open-auth').addEventListener('click', () => {
                    authModal.style.display = 'flex';
                });
            }
        }
        
        function loadUserData() {
            const token = localStorage.getItem('token');
            if (!token) return;
            
            // Load watchlist from server
            fetch(`${BACKEND_URL}/api/user/watchlist`, {
                headers: {
                    'Authorization': `Bearer ${token}`
                }
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    watchlist = data.watchlist || [];
                    localStorage.setItem('watchlist', JSON.stringify(watchlist));
                    displayWatchlist();
                }
            })
            .catch(error => {
                console.error('Error loading watchlist:', error);
            });
            
            // Load watch history from server
            fetch(`${BACKEND_URL}/api/user/history`, {
                headers: {
                    'Authorization': `Bearer ${token}`
                }
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    localStorage.setItem('watchHistory', JSON.stringify(data.history || []));
                    if (document.getElementById('history').classList.contains('active')) {
                        displayWatchHistory();
                    }
                }
            })
            .catch(error => {
                console.error('Error loading history:', error);
            });
        }
        
        function saveUserData() {
            const token = localStorage.getItem('token');
            if (!token || !currentUser) return;
            
            // Save watchlist to server
            const watchlistData = JSON.parse(localStorage.getItem('watchlist')) || [];
            fetch(`${BACKEND_URL}/api/user/watchlist`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${token}`
                },
                body: JSON.stringify({ watchlist: watchlistData })
            })
            .then(response => response.json())
            .then(data => {
                if (!data.success) {
                    console.error('Failed to save watchlist:', data.message);
                }
            })
            .catch(error => {
                console.error('Error saving watchlist:', error);
            });
            
            // Save watch history to server
            const historyData = JSON.parse(localStorage.getItem('watchHistory')) || [];
            fetch(`${BACKEND_URL}/api/user/history`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${token}`
                },
                body: JSON.stringify({ history: historyData })
            })
            .then(response => response.json())
            .then(data => {
                if (!data.success) {
                    console.error('Failed to save history:', data.message);
                }
            })
            .catch(error => {
                console.error('Error saving history:', error);
            });
        }

        // Perform search
        function performSearch() {
            const query = searchInput.value.trim();
            if (query === '') return;

            // Hide all tabs and show search results
            tabButtons.forEach(btn => btn.classList.remove('active'));
            tabContents.forEach(content => {
                content.classList.remove('active');
                content.style.display = 'none';
            });
            
            searchResultsTab.style.display = 'block';
            searchResultsTab.classList.add('active');
            currentActiveTab = 'search-results';
            
            searchMoviesGrid.innerHTML = `<div class="loading"><i class="fas fa-spinner"></i> Searching movies...</div>`;
            searchTvGrid.innerHTML = `<div class="loading"><i class="fas fa-spinner"></i> Searching TV shows...</div>`;
            
            // Search for movies and TV shows simultaneously
            Promise.all([
                fetch(`${API_URL}/search/movie?api_key=${API_KEY}&query=${encodeURIComponent(query)}`),
                fetch(`${API_URL}/search/tv?api_key=${API_KEY}&query=${encodeURIComponent(query)}`)
            ])
            .then(responses => Promise.all(responses.map(res => res.json())))
            .then(([moviesData, tvData]) => {
                searchMoviesGrid.innerHTML = '';
                searchTvGrid.innerHTML = '';
                
                if (moviesData.results.length === 0) {
                    searchMoviesGrid.innerHTML = '<div class="no-results">No movies found</div>';
                } else {
                    moviesData.results.forEach(movie => createMediaCard(movie, searchMoviesGrid, 'movie', true));
                }
                
                if (tvData.results.length === 0) {
                    searchTvGrid.innerHTML = '<div class="no-results">No TV shows found</div>';
                } else {
                    tvData.results.forEach(show => createMediaCard(show, searchTvGrid, 'tv', true));
                }
            })
            .catch(error => {
                console.error('Error searching:', error);
                searchMoviesGrid.innerHTML = '<div class="error">Error loading movies</div>';
                searchTvGrid.innerHTML = '<div class="error">Error loading TV shows</div>';
            });
        }

        // Fetch popular movies
        function fetchPopularMovies() {
            moviesGrid.innerHTML = `<div class="loading"><i class="fas fa-spinner"></i> Loading movies...</div>`;
            
            fetch(`${API_URL}/movie/popular?api_key=${API_KEY}`)
                .then(response => response.json())
                .then(data => {
                    moviesGrid.innerHTML = '';
                    if (data.results.length === 0) {
                        moviesGrid.innerHTML = '<div class="no-results">No movies found</div>';
                        return;
                    }
                    data.results.forEach(movie => createMediaCard(movie, moviesGrid, 'movie'));
                })
                .catch(error => {
                    console.error('Error fetching movies:', error);
                    moviesGrid.innerHTML = '<div class="error">Error loading movies</div>';
                });
        }

        // Fetch popular TV shows
        function fetchPopularTVShows() {
            tvGrid.innerHTML = `<div class="loading"><i class="fas fa-spinner"></i> Loading TV shows...</div>`;
            
            fetch(`${API_URL}/tv/popular?api_key=${API_KEY}`)
                .then(response => response.json())
                .then(data => {
                    tvGrid.innerHTML = '';
                    if (data.results.length === 0) {
                        tvGrid.innerHTML = '<div class="no-results">No TV shows found</div>';
                        return;
                    }
                    data.results.forEach(show => createMediaCard(show, tvGrid, 'tv'));
                })
                .catch(error => {
                    console.error('Error fetching TV shows:', error);
                    tvGrid.innerHTML = '<div class="error">Error loading TV shows</div>';
                });
        }

        // Create media card
        function createMediaCard(item, container, type, isSearchResult = false) {
            const card = document.createElement('div');
            card.className = 'media-card';
            card.dataset.id = item.id;
            
            // Cache media data
            mediaCache[item.id] = {
                poster_path: item.poster_path,
                title: type === 'movie' ? item.title : item.name,
                type: type,
                release_date: type === 'movie' ? item.release_date : item.first_air_date,
                vote_average: item.vote_average
            };
            
            const posterPath = item.poster_path ? IMAGE_URL + item.poster_path : 'https://via.placeholder.com/200x300?text=No+Poster';
            const title = type === 'movie' ? item.title : item.name;
            const date = type === 'movie' ? item.release_date : item.first_air_date;
            const year = date ? date.split('-')[0] : 'N/A';
            
            // Check if item is in watchlist
            const isInWatchlist = watchlist.some(w => w.id === item.id && w.type === type);
            
            // Add watchlist button to ALL cards
            card.innerHTML = `
                <button class="add-to-watchlist ${isInWatchlist ? 'in-watchlist' : ''}" 
                        title="${isInWatchlist ? 'Remove from watchlist' : 'Add to watchlist'}">
                    <i class="fas fa-bookmark"></i>
                </button>
                <img src="${posterPath}" alt="${title}" class="media-poster">
                <div class="media-info">
                    <h3 class="media-title">${title}</h3>
                    <div class="media-meta">
                        <span>${year}</span>
                        <span class="media-rating"><i class="fas fa-star"></i> ${item.vote_average.toFixed(1)}</span>
                    </div>
                </div>
            `;
            
            // Play on click (excluding watchlist button clicks)
            card.addEventListener('click', (e) => {
                if (e.target.closest('.add-to-watchlist')) return;
                
                document.querySelector('.tab-content.active').style.display = 'none';
                playerContainer.style.display = 'block';
                
                if (type === 'movie') {
                    playMovie(item.id);
                } else {
                    currentTvShowId = item.id;
                    fetchTvShowSeasons(item.id);
                }
            });
            
            // Watchlist button functionality for ALL cards
            const watchlistBtn = card.querySelector('.add-to-watchlist');
            watchlistBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                toggleWatchlist(item.id, type);
                
                // Update button appearance
                watchlistBtn.classList.toggle('in-watchlist');
                watchlistBtn.title = watchlistBtn.classList.contains('in-watchlist') ? 
                    'Remove from watchlist' : 'Add to watchlist';
                
                // If we're in the watchlist tab, remove the card if it was deleted
                if (watchlistBtn.classList.contains('in-watchlist') === false && 
                    document.getElementById('watchlist').classList.contains('active')) {
                    card.remove();
                }
            });
            
            container.appendChild(card);
        }

        // Toggle item in watchlist
        function toggleWatchlist(mediaId, mediaType) {
            const index = watchlist.findIndex(item => item.id === mediaId && item.type === mediaType);
            
            if (index === -1) {
                // Add to watchlist
                watchlist.push({
                    id: mediaId,
                    type: mediaType,
                    addedAt: new Date().getTime()
                });
            } else {
                // Remove from watchlist
                watchlist.splice(index, 1);
            }
            
            localStorage.setItem('watchlist', JSON.stringify(watchlist));
            
            // If we're on the watchlist tab, refresh the display
            if (document.getElementById('watchlist').classList.contains('active')) {
                displayWatchlist();
            }
        }

        // Display watchlist
        function displayWatchlist() {
            watchlistGrid.innerHTML = '';
            
            if (watchlist.length === 0) {
                watchlistGrid.innerHTML = '<div class="no-results">Your watchlist is empty</div>';
                return;
            }
            
            // Sort by most recently added
            const sortedWatchlist = [...watchlist].sort((a, b) => b.addedAt - a.addedAt);
            
            sortedWatchlist.forEach(item => {
                const media = mediaCache[item.id];
                if (!media) return;
                
                const card = document.createElement('div');
                card.className = 'media-card';
                card.dataset.id = item.id;
                
                const posterPath = media.poster_path ? IMAGE_URL + media.poster_path : 'https://via.placeholder.com/200x300?text=No+Poster';
                const date = media.release_date;
                const year = date ? date.split('-')[0] : 'N/A';
                
                card.innerHTML = `
                    <button class="add-to-watchlist in-watchlist" title="Remove from watchlist">
                        <i class="fas fa-bookmark"></i>
                    </button>
                    <img src="${posterPath}" alt="${media.title}" class="media-poster">
                    <div class="media-info">
                        <h3 class="media-title">${media.title}</h3>
                        <div class="media-meta">
                            <span>${year}</span>
                            <span class="media-rating"><i class="fas fa-star"></i> ${media.vote_average.toFixed(1)}</span>
                        </div>
                    </div>
                `;
                
                // Play on click
                card.addEventListener('click', (e) => {
                    if (e.target.closest('.add-to-watchlist')) return;
                    
                    if (item.type === 'movie') {
                        playMovie(item.id);
                    } else {
                        currentTvShowId = item.id;
                        fetchTvShowSeasons(item.id);
                    }
                });
                
                // Watchlist button functionality
                const watchlistBtn = card.querySelector('.add-to-watchlist');
                watchlistBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    toggleWatchlist(item.id, item.type);
                    card.remove();
                });
                
                watchlistGrid.appendChild(card);
            });
        }

        // Play movie
        function playMovie(movieId) {
            document.querySelector('.tab-content.active').style.display = 'none';
            playerContainer.style.display = 'block';
            seasonSelector.style.display = 'none';
            episodeSelector.style.display = 'none';
            
            playerIframe.src = `${VIDFAST_URL}/movie/${movieId}?autoPlay=true&theme=01b4e4`;
            
            // Save to history
            saveWatchHistory(movieId, 'movie');
            
            // Check for existing progress
            const progress = getCurrentProgress();
            if (progress && progress.id === movieId) {
                playerIframe.onload = function() {
                    this.contentWindow.postMessage({
                        action: 'seek',
                        time: progress.currentTime
                    }, '*');
                };
            }
            
            // Set up timeupdate listener
            window.addEventListener('message', function(e) {
                if (e.data.action === 'timeupdate') {
                    saveCurrentProgress(movieId, e.data.currentTime, e.data.duration);
                }
            });
        }

        // Fetch TV show seasons
        function fetchTvShowSeasons(tvId) {
            fetch(`${API_URL}/tv/${tvId}?api_key=${API_KEY}`)
                .then(response => response.json())
                .then(data => {
                    document.querySelector('.tab-content.active').style.display = 'none';
                    playerContainer.style.display = 'block';
                    seasonSelector.style.display = 'block';
                    
                    // Create season buttons
                    seasonButtons.innerHTML = '';
                    data.seasons.forEach(season => {
                        if (season.season_number === 0) return; // Skip special seasons
                        
                        const button = document.createElement('button');
                        button.className = 'season-btn';
                        button.textContent = `Season ${season.season_number}`;
                        button.dataset.season = season.season_number;
                        
                        if (season.season_number === 1) {
                            button.classList.add('active');
                            currentSeason = 1;
                            fetchEpisodes(tvId, 1);
                        }
                        
                        button.addEventListener('click', () => {
                            document.querySelectorAll('.season-btn').forEach(btn => btn.classList.remove('active'));
                            button.classList.add('active');
                            currentSeason = season.season_number;
                            fetchEpisodes(tvId, season.season_number);
                        });
                        
                        seasonButtons.appendChild(button);
                    });
                })
                .catch(error => {
                    console.error('Error fetching TV show details:', error);
                });
        }

        // Fetch episodes for a season
        function fetchEpisodes(tvId, seasonNumber) {
            fetch(`${API_URL}/tv/${tvId}/season/${seasonNumber}?api_key=${API_KEY}`)
                .then(response => response.json())
                .then(data => {
                    currentEpisodes = data.episodes;
                    episodeSelector.style.display = 'block';
                    
                    // Create episode buttons
                    episodeButtons.innerHTML = '';
                    data.episodes.forEach(episode => {
                        const button = document.createElement('button');
                        button.className = 'episode-btn';
                        button.innerHTML = `
                            <div class="episode-info">
                                <span class="episode-number">E${episode.episode_number}</span>
                                <span class="episode-name">${episode.name || 'Untitled Episode'}</span>
                            </div>
                        `;
                        button.dataset.episode = episode.episode_number;
                        
                        if (episode.episode_number === 1) {
                            button.classList.add('active');
                            playTvEpisode(tvId, seasonNumber, 1);
                        }
                        
                        button.addEventListener('click', () => {
                            document.querySelectorAll('.episode-btn').forEach(btn => btn.classList.remove('active'));
                            button.classList.add('active');
                            playTvEpisode(tvId, seasonNumber, episode.episode_number);
                        });
                        
                        episodeButtons.appendChild(button);
                    });
                })
                .catch(error => {
                    console.error('Error fetching episodes:', error);
                });
        }

        // Play TV episode
        function playTvEpisode(tvId, seasonNumber, episodeNumber) {
            playerIframe.src = `${VIDFAST_URL}/tv/${tvId}/${seasonNumber}/${episodeNumber}?autoPlay=true&theme=01b4e4&nextButton=true&autoNext=true`;
            
            // Save to history
            saveWatchHistory(tvId, 'tv', seasonNumber, episodeNumber);
            
            // Check for existing progress
            const progress = getCurrentProgress();
            if (progress && progress.id === tvId && progress.season === seasonNumber && progress.episode === episodeNumber) {
                playerIframe.onload = function() {
                    this.contentWindow.postMessage({
                        action: 'seek',
                        time: progress.currentTime
                    }, '*');
                };
            }
            
            // Set up timeupdate listener
            window.addEventListener('message', function(e) {
                if (e.data.action === 'timeupdate') {
                    saveCurrentProgress(tvId, e.data.currentTime, e.data.duration, seasonNumber, episodeNumber);
                }
            });
        }

        // Watch history functions
        function saveWatchHistory(mediaId, mediaType, season = null, episode = null, progress = null) {
            const history = JSON.parse(localStorage.getItem('watchHistory')) || [];
            
            // Remove existing entry if it exists
            const existingIndex = history.findIndex(item => 
                item.id === mediaId && 
                (mediaType === 'movie' || (item.season === season && item.episode === episode))
            );
            
            if (existingIndex !== -1) {
                history.splice(existingIndex, 1);
            }
            
            // Add new entry
            history.unshift({
                id: mediaId,
                type: mediaType,
                season: season,
                episode: episode,
                progress: progress,
                timestamp: new Date().getTime(),
                title: mediaCache[mediaId]?.title || (mediaType === 'movie' ? 'Movie' : 'TV Show')
            });
            
            // Keep only the last 50 items
            if (history.length > 50) {
                history.length = 50;
            }
            
            localStorage.setItem('watchHistory', JSON.stringify(history));
        }

        function getWatchHistory() {
            return JSON.parse(localStorage.getItem('watchHistory')) || [];
        }

        function saveCurrentProgress(mediaId, currentTime, duration, season = null, episode = null) {
            const progress = {
                id: mediaId,
                currentTime: currentTime,
                duration: duration,
                season: season,
                episode: episode,
                timestamp: new Date().getTime()
            };
            localStorage.setItem('currentProgress', JSON.stringify(progress));
        }

        function getCurrentProgress() {
            return JSON.parse(localStorage.getItem('currentProgress'));
        }

        function displayWatchHistory() {
            const history = getWatchHistory();
            
            historyGrid.innerHTML = '';
            
            if (history.length === 0) {
                historyGrid.innerHTML = '<div class="no-results">No watch history yet</div>';
                return;
            }
            
            history.forEach(item => {
                const card = document.createElement('div');
                card.className = 'media-card history-card';
                card.dataset.id = item.id;
                
                let progressBar = '';
                if (item.progress && item.progress.duration) {
                    const percentage = Math.min(100, (item.progress.currentTime / item.progress.duration) * 100);
                    progressBar = `<div class="progress-bar"><div style="width: ${percentage}%"></div></div>`;
                }
                
                const posterPath = mediaCache[item.id]?.poster_path 
                    ? IMAGE_URL + mediaCache[item.id].poster_path 
                    : 'https://via.placeholder.com/200x300?text=No+Poster';
                
                card.innerHTML = `
                    <button class="delete-item" title="Remove from history">
                        <i class="fas fa-times"></i>
                    </button>
                    <img src="${posterPath}" class="media-poster">
                    <div class="media-info">
                        <h3 class="media-title">${item.title}</h3>
                        <div class="media-meta">
                            ${item.type === 'tv' ? `<span>Season ${item.season}  Episode ${item.episode}</span>` : '<span>Movie</span>'}
                            <span class="media-time">${formatTime(item.timestamp)}</span>
                        </div>
                        ${progressBar}
                    </div>
                `;
                
                // Play on click
                card.addEventListener('click', (e) => {
                    // Don't trigger if delete button was clicked
                    if (e.target.closest('.delete-item')) return;
                    
                    if (item.type === 'movie') {
                        playMovie(item.id);
                    } else {
                        currentTvShowId = item.id;
                        fetchTvShowSeasons(item.id);
                        setTimeout(() => {
                            document.querySelector(`.season-btn[data-season="${item.season}"]`)?.click();
                            setTimeout(() => {
                                document.querySelector(`.episode-btn[data-episode="${item.episode}"]`)?.click();
                            }, 300);
                        }, 300);
                    }
                });
                
                // Delete button functionality
                const deleteBtn = card.querySelector('.delete-item');
                deleteBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    deleteHistoryItem(item.id, item.season, item.episode);
                });
                
                historyGrid.appendChild(card);
            });
        }

        function deleteHistoryItem(itemId, season = null, episode = null) {
            let history = getWatchHistory();
            
            history = history.filter(item => {
                if (item.id !== itemId) return true;
                if (season !== null && item.season !== season) return true;
                if (episode !== null && item.episode !== episode) return true;
                return false;
            });
            
            localStorage.setItem('watchHistory', JSON.stringify(history));
            displayWatchHistory();
        }

        function clearAllHistory() {
            if (confirm('Are you sure you want to clear all watch history?')) {
                localStorage.removeItem('watchHistory');
                displayWatchHistory();
            }
        }

        function formatTime(timestamp) {
            const date = new Date(timestamp);
            return date.toLocaleDateString() + ' ' + date.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
        }
    </script>
    <footer style="background-color: #f5f5f5; padding: 20px; text-align: center; font-family: Arial, sans-serif; border-top: 1px solid #ddd;">
        <div style="margin-bottom: 10px;">
            <strong> Important Notice</strong>
        </div>
        <div style="margin-bottom: 15px; color: #555; font-size: 14px;">
            StreamFlix does not host or store any media files. All content is sourced from third-party services and platforms. 
            We respect intellectual property rights and comply with DMCA regulations.
        </div>
        <div style="font-size: 12px; color: #777;">
             <span id="current-year"></span> StreamFlix. All rights reserved. | 
            Made with  for movie lovers | Version 1.0 @
        </div>
        <div id="datetime" style="font-size: 12px; color: #777; margin-top: 5px;"></div>
    </footer>

    <script>
        // Dynamic Year
        document.getElementById('current-year').textContent = new Date().getFullYear();
        
        // Dynamic Date & Time
        function updateDateTime() {
            const now = new Date();
            const options = { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit'
            };
            document.getElementById('datetime').textContent = now.toLocaleDateString('en-US', options);
        }
        updateDateTime();
        setInterval(updateDateTime, 1000); // Update every second
    </script>


<script>
const BACKEND_URL = 'https://streamflixmaroc.free.nf';
let currentUserId = null;

async function handleLogin() {
  const email = document.getElementById('login-email').value;
  const password = document.getElementById('login-password').value;

  const res = await fetch(`${BACKEND_URL}/login.php`, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ email, password })
  });

  const data = await res.json();
  if (data.success) {
    currentUserId = data.user.id;
    document.getElementById('auth-section').style.display = 'none';
    document.getElementById('user-dashboard').style.display = 'block';
    document.getElementById('welcome-message').textContent = `Welcome, ${data.user.name}`;
  } else {
    alert(data.message);
  }
}

async function handleRegister() {
  const name = document.getElementById('register-name').value;
  const email = document.getElementById('register-email').value;
  const password = document.getElementById('register-password').value;

  const res = await fetch(`${BACKEND_URL}/register.php`, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ name, email, password })
  });

  const data = await res.json();
  alert(data.message);
}

async function loadUserData() {
  if (!currentUserId) {
    alert('Please log in first.');
    return;
  }

  try {
    const watchlistRes = await fetch(`${BACKEND_URL}/user_data.php?action=get_watchlist&user_id=${currentUserId}`);
    const historyRes = await fetch(`${BACKEND_URL}/user_data.php?action=get_history&user_id=${currentUserId}`);

    const watchlist = await watchlistRes.json();
    const history = await historyRes.json();

    displayList('watchlist', watchlist.watchlist);
    displayList('history', history.history);
  } catch (err) {
    console.error('Error fetching user data:', err);
    alert('Failed to load user data.');
  }
}

function displayList(elementId, items) {
  const ul = document.getElementById(elementId);
  if (!ul) return;
  ul.innerHTML = '';
  if (!items || items.length === 0) {
    ul.innerHTML = '<li>No data available.</li>';
    return;
  }
  items.forEach(item => {
    const li = document.createElement('li');
    li.textContent = `${item.media_type.toUpperCase()} - ID: ${item.media_id}`;
    if (item.season) li.textContent += ` | Season: ${item.season}`;
    if (item.episode) li.textContent += ` | Episode: ${item.episode}`;
    ul.appendChild(li);
  });
}

// TMDB content
const tmdbApiKey = 'YOUR_TMDB_API_KEY'; // Replace with your API key
const tmdbContainer = document.getElementById('tmdb-content');

async function loadTMDBContent() {
  try {
    const res = await fetch(`https://api.themoviedb.org/3/trending/movie/day?api_key=${tmdbApiKey}`);
    const data = await res.json();
    if (data.results) {
      displayTMDB(data.results);
    }
  } catch (err) {
    console.error('Error loading TMDB data:', err);
  }
}

function displayTMDB(movies) {
  if (!tmdbContainer) return;
  tmdbContainer.innerHTML = '';
  movies.forEach(movie => {
    const div = document.createElement('div');
    div.className = 'movie-card';
    div.innerHTML = `
      <img src="https://image.tmdb.org/t/p/w200${movie.poster_path}" alt="${movie.title}" />
      <h4>${movie.title}</h4>
    `;
    tmdbContainer.appendChild(div);
  });
}

window.addEventListener('DOMContentLoaded', () => {
  loadTMDBContent();
});
</script>
</body>
</html>
